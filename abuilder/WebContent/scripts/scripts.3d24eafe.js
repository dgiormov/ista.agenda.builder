"use strict";angular.module("istaAngularApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/days/:id",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/sessions/:id",{templateUrl:"views/sessiondetails.html",controller:"DetailsCtrl"}).when("/codes",{templateUrl:"views/codes.html",controller:"CodesCtrl"}).when("/ranking",{templateUrl:"views/ranking.html",controller:"RankingCtrl"}).otherwise({redirectTo:"/days/26"})}]).controller("LoginCtrl",["$scope","UserService",function(a,b){a.userDetails=b.get()}]).config(["$httpProvider",function(a){a.interceptors.push(["$rootScope","$q",function(a,b){return{responseError:function(a){switch(a.status){case 401:var c=b.defer();return $("#loginModal").modal("show"),c.promise;case 403:$("#loginModal").modal("show")}return b.reject(a)}}}])}]),jQuery(document).ready(function(){jQuery("#navbar-ex1-collapse").click(function(){jQuery("#navbar-ex1-collapse.in").collapse("hide")})}),angular.module("istaAngularApp").controller("MainCtrl",["$scope","$routeParams","session","PersonService",function(a,b,c,d){a.selected=!1,a.sessions=c.query({date:b.id}),a.addSession=function(a,b){b.preventDefault(),(new d).$save({id:a.id,isSelected:!a.isSelected},function(){a.isSelected=!a.isSelected},function(){})},a.isSelected=function(a){return a?"session-added":"not-added"},a.filterSessions=function(b){a.selected=b},a.getSelectedAgendaClass=function(b){return a.selected&&b||!a.selected&&!b?"panel-link-active":""},a.getTrackClass=function(a){return a.replace(" ","-").toLowerCase()},a.lTime=0,a.isChangedTime=function(b){return a.lTime!=b?(a.lTime=b,!0):!1}}]).filter("isSelectedElement",function(){return function(a,b){if(!b)return a;for(var c=[],d=0;d<a.length;d++)a[d].isSelected&&c.push(a[d]);return c}}),angular.module("istaAngularApp").controller("DetailsCtrl",["$scope","$routeParams","sessionDetails","sessionComments","sessionCommentsLike","RatingService","PersonService",function(a,b,c,d,e,f,g){a.descrClass="description-collapsed",a.bioStatus=new Array,a.session=c.get({id:b.id},function(){for(var b=a.session.speakers,c=0;c<b.length;c++)a.bioStatus[c]="description-collapsed"}),a.addSession=function(a){(new g).$save({id:a.id,isSelected:!a.isSelected},function(){a.isSelected=!a.isSelected},function(){})},a.refreshComments=function(){a.comments=d.query({session_id:b.id}),a.comment=""},a.refreshComments(),a.onSave=function(){d.save({session_id:b.id},{data:a.comment},function(){a.refreshComments()})},a.expandColapse=function(){a.descrClass="description-expanded"===a.descrClass?"description-collapsed":"description-expanded"},a.expandColapseBio=function(b){a.bioStatus[b]="description-expanded"===a.bioStatus[b]?"description-collapsed":"description-expanded"},a.getBioClass=function(b){return a.bioStatus[b]},a.getStarSelectedClass=function(b){return b<=a.session.rating?"yes-rated":"not-rated"},a.rate=function(b,c){(new f).$save({sessionId:c.id,rating:b},function(){a.session.rating=b},function(){a.session.rating=0})},a.like=function(a){e.save({id:a.id},{},function(){a.likedByMe=!a.likedByMe,a.likes=a.likedByMe?a.likes+1:a.likes-1},function(){a.likedByMe=!1})},a.getTrackClass=function(a){return a.$resolved?a.track.replace(" ","-").toLowerCase():""},a.isAdded=function(b){return a.session.isSelected?b?"session-added":"fa-check":b?"not-added":"fa-plus"}}]),angular.module("istaAngularApp").service("session",["$resource",function(a){return a("rest/sessions")}]).service("PersonService",["$resource",function(a){return a("rest/book/session")}]),angular.module("istaAngularApp").service("sessionDetails",["$resource",function(a){return a("rest/sessions/:id")}]).service("RatingService",["$resource",function(a){return a("rest/rating/session")}]),angular.module("istaAngularApp").service("UserService",["$resource",function(a){return a("/rest/user")}]),angular.module("istaAngularApp").service("sessionComments",["$resource",function(a){return a("/rest/comments/:session_id")}]).service("sessionCommentsLike",["$resource",function(a){return a("/rest/comments/:id/like")}]),angular.module("istaAngularApp").controller("CodesCtrl",["$scope",function(){}]),angular.module("istaAngularApp").service("codes",["$resource",function(a){return a("rest/codes")}]),angular.module("istaAngularApp").controller("RankingCtrl",["$scope","ranking",function(a,b){a.allRanking=b.get()}]),angular.module("istaAngularApp").service("ranking",["$resource",function(a){return a("/rest/ranking")}]);